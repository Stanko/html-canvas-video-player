{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///canvas-video-player.min.js","webpack:///webpack/bootstrap 24db9500aca1bfeffbc2","webpack:///./C:/projects/html-canvas-video-player/src/index.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","DEFAULT_OPTIONS","framesPerSecond","hideVideo","autoplay","audio","timelineActions","timelineSelector","timelinePasedSelector","resetOnLastFrame","loop","CanvasVideoPlayer","_this","options","undefined","_canvasClickHandler","playPause","_videoTimeUpdateHandler","_drawFrame","_updateTimeLine","_videoCanPlayHandler","_timeLineClick","e","offset","clientX","getOffset","_canvas","left","jumpTo","_timeline","offsetWidth","_windowResizeHandler","_setCanvasSize","_options","_video","document","querySelector","videoSelector","canvasSelector","_timelinePassed","timelinePassedSelector","console","error","_setAudio","_ctx","getContext","_playing","init","_audio","createElement","innerHTML","parentNode","insertBefore","load","_bind","style","display","play","pause","removeChild","_unbind","percentage","currentTime","duration","_lastTime","Date","now","_loop","window","addEventListener","readyState","removeEventListener","canvas","video","_width","clientWidth","_height","clientHeight","setAttribute","webkitTransform","transform","_this2","time","elapsed","currentVideoTime","Math","abs","_animationFrame","requestAnimationFrame","cancelAnimationFrame","drawImage","elem","rect","getBoundingClientRect","docElem","doc","width","height","getClientRects","ownerDocument","documentElement","top","pageYOffset","clientTop","pageXOffset","clientLeft","default"],"mappings":"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","file":"canvas-video-player.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"CanvasVideoPlayer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CanvasVideoPlayer\"] = factory();\n\telse\n\t\troot[\"CanvasVideoPlayer\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"CanvasVideoPlayer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CanvasVideoPlayer\"] = factory();\n\telse\n\t\troot[\"CanvasVideoPlayer\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar DEFAULT_OPTIONS = {\n\t\tframesPerSecond: 25,\n\t\thideVideo: true,\n\t\tautoplay: false,\n\t\taudio: false,\n\t\ttimelineActions: true,\n\t\ttimelineSelector: false,\n\t\ttimelinePasedSelector: false,\n\t\tresetOnLastFrame: true,\n\t\tloop: false\n\t};\n\t\n\tvar CanvasVideoPlayer = function () {\n\t\tfunction CanvasVideoPlayer() {\n\t\t\tvar _this = this;\n\t\n\t\t\tvar options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\n\t\t\t_classCallCheck(this, CanvasVideoPlayer);\n\t\n\t\t\tthis._canvasClickHandler = function () {\n\t\t\t\t_this.playPause();\n\t\t\t};\n\t\n\t\t\tthis._videoTimeUpdateHandler = function () {\n\t\t\t\t_this._drawFrame();\n\t\t\t\t_this._updateTimeLine();\n\t\t\t};\n\t\n\t\t\tthis._videoCanPlayHandler = function () {\n\t\t\t\t_this._drawFrame();\n\t\t\t};\n\t\n\t\t\tthis._timeLineClick = function (e) {\n\t\t\t\tvar offset = e.clientX - CanvasVideoPlayer.getOffset(_this._canvas).left;\n\t\n\t\t\t\t_this.jumpTo(offset / _this._timeline.offsetWidth);\n\t\t\t};\n\t\n\t\t\tthis._windowResizeHandler = function () {\n\t\t\t\t_this._setCanvasSize();\n\t\t\t\t_this._drawFrame();\n\t\t\t};\n\t\n\t\t\tthis._options = _extends({}, DEFAULT_OPTIONS, options);\n\t\n\t\t\tthis._video = document.querySelector(this._options.videoSelector);\n\t\t\tthis._canvas = document.querySelector(this._options.canvasSelector);\n\t\t\tthis._timeline = document.querySelector(this._options.timelineSelector);\n\t\t\tthis._timelinePassed = document.querySelector(this._options.timelinePassedSelector);\n\t\n\t\t\tif (!this._options.videoSelector || !this._video) {\n\t\t\t\treturn console.error('No \"videoSelector\" property, or the element is not found');\n\t\t\t}\n\t\n\t\t\tif (!this._options.canvasSelector || !this._canvas) {\n\t\t\t\treturn console.error('No \"canvasSelector\" property, or the element is not found');\n\t\t\t}\n\t\n\t\t\tif (this._options.timelineSelector && !this._timeline) {\n\t\t\t\treturn console.error('Element for the \"timelineSelector\" selector not found');\n\t\t\t}\n\t\n\t\t\tif (this._options.timelineSelector && !this._timelinePassed) {\n\t\t\t\treturn console.error('Element for the \"timelinePassed\" not found');\n\t\t\t}\n\t\n\t\t\tif (this._options.audio) {\n\t\t\t\tthis._setAudio();\n\t\t\t}\n\t\n\t\t\tthis._ctx = this._canvas.getContext('2d');\n\t\n\t\t\tthis._playing = false;\n\t\n\t\t\tthis.init();\n\t\t}\n\t\n\t\t_createClass(CanvasVideoPlayer, [{\n\t\t\tkey: '_setAudio',\n\t\t\tvalue: function _setAudio() {\n\t\t\t\tif (typeof this._options.audio === 'string') {\n\t\t\t\t\tthis._audio = document.querySelector(this._options.audio);\n\t\n\t\t\t\t\treturn !this._audio && console.error('Element for the \"audio\" not found');\n\t\t\t\t}\n\t\n\t\t\t\tthis._audio = document.createElement('audio');\n\t\t\t\tthis._audio.innerHTML = this._video.innerHTML;\n\t\t\t\tthis._video.parentNode.insertBefore(this._audio, this._video);\n\t\t\t\tthis._audio.load();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'init',\n\t\t\tvalue: function init() {\n\t\t\t\tthis._video.load();\n\t\n\t\t\t\tthis._setCanvasSize();\n\t\t\t\tthis._bind();\n\t\t\t\tthis._updateTimeLine();\n\t\n\t\t\t\tif (this._options.hideVideo) {\n\t\t\t\t\tthis._video.style.display = 'none';\n\t\t\t\t}\n\t\n\t\t\t\tif (this._options.autoplay) {\n\t\t\t\t\tthis.play();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'destroy',\n\t\t\tvalue: function destroy() {\n\t\t\t\tthis.pause();\n\t\n\t\t\t\tif (this._options.audio) {\n\t\t\t\t\tthis._audio.parentNode.removeChild(this._audio);\n\t\t\t\t}\n\t\n\t\t\t\tthis._unbind();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'jumpTo',\n\t\t\tvalue: function jumpTo(percentage) {\n\t\t\t\tthis._video.currentTime = this._video.duration * percentage;\n\t\n\t\t\t\tif (this._options.audio) {\n\t\t\t\t\tthis._audio.currentTime = this._audio.duration * percentage;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'play',\n\t\t\tvalue: function play() {\n\t\t\t\tthis._lastTime = Date.now();\n\t\t\t\tthis._playing = true;\n\t\t\t\tthis._loop();\n\t\n\t\t\t\tif (this._options.audio) {\n\t\t\t\t\tthis._audio.currentTime = this._video.currentTime;\n\t\t\t\t\tthis._audio.play();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'pause',\n\t\t\tvalue: function pause() {\n\t\t\t\tthis._playing = false;\n\t\n\t\t\t\tif (this._options.audio) {\n\t\t\t\t\tthis._audio.pause();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'playPause',\n\t\t\tvalue: function playPause() {\n\t\t\t\tif (this._playing) {\n\t\t\t\t\tthis.pause();\n\t\t\t\t} else {\n\t\t\t\t\tthis.play();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_bind',\n\t\t\tvalue: function _bind() {\n\t\t\t\twindow.addEventListener('resize', this._windowResizeHandler);\n\t\n\t\t\t\tthis._canvas.addEventListener('click', this._canvasClickHandler);\n\t\n\t\t\t\tthis._video.addEventListener('timeupdate', this._videoTimeUpdateHandler);\n\t\t\t\tthis._video.addEventListener('canplay', this._videoCanPlayHandler);\n\t\n\t\t\t\tif (this._options.timelineActions) {\n\t\t\t\t\tthis._timeline.addEventListener('click', this._timeLineClick);\n\t\t\t\t}\n\t\n\t\t\t\tif (this._video.readyState >= 2) {\n\t\t\t\t\tthis._drawFrame();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_unbind',\n\t\t\tvalue: function _unbind() {\n\t\t\t\twindow.removeEventListener('resize', this._windowResizeHandler);\n\t\n\t\t\t\tthis.canvas.removeEventListener('click', this._canvasClickHandler);\n\t\n\t\t\t\tthis.video.removeEventListener('timeupdate', this._videoTimeUpdateHandler);\n\t\t\t\tthis.video.removeEventListener('canplay', this._videoCanPlayHandler);\n\t\n\t\t\t\tif (this._options.timelineActions) {\n\t\t\t\t\tthis._timeline.removeEventListener('click', this._timeLineClick);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_setCanvasSize',\n\t\t\tvalue: function _setCanvasSize() {\n\t\t\t\tthis._width = this._canvas.clientWidth;\n\t\t\t\tthis._height = this._canvas.clientHeight;\n\t\n\t\t\t\tthis._canvas.setAttribute('width', this._width);\n\t\t\t\tthis._canvas.setAttribute('height', this._height);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_updateTimeLine',\n\t\t\tvalue: function _updateTimeLine() {\n\t\t\t\tif (this._options.timelineSelector) {\n\t\t\t\t\tvar percentage = -100 + (this._video.currentTime || 0) / this._video.duration * 100;\n\t\n\t\t\t\t\tthis._timelinePassed.style.webkitTransform = 'translateX(' + percentage + '%)';\n\t\t\t\t\tthis._timelinePassed.style.transform = 'translateX(' + percentage + '%)';\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_loop',\n\t\t\tvalue: function _loop() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tvar time = Date.now();\n\t\t\t\tvar elapsed = (time - this._lastTime) / 1000;\n\t\t\t\tvar currentVideoTime = this._video.currentTime;\n\t\n\t\t\t\tif (elapsed >= 1 / this._options.framesPerSecond) {\n\t\t\t\t\tthis._video.currentTime = currentVideoTime + elapsed;\n\t\t\t\t\tthis._lastTime = time;\n\t\n\t\t\t\t\tif (this._audio && Math.abs(this._audio.currentTime - currentVideoTime) > 0.2) {\n\t\t\t\t\t\tthis._audio.currentTime = currentVideoTime;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (currentVideoTime >= this._video.duration) {\n\t\t\t\t\tthis._playing = false;\n\t\n\t\t\t\t\tif (this._options.resetOnLastFrame === true) {\n\t\t\t\t\t\tthis._video.currentTime = 0;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (this._options.loop === true) {\n\t\t\t\t\t\tthis._video.currentTime = 0;\n\t\t\t\t\t\tthis.play();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (this._playing) {\n\t\t\t\t\tthis._animationFrame = requestAnimationFrame(function () {\n\t\t\t\t\t\treturn _this2._loop();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcancelAnimationFrame(this._animationFrame);\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_drawFrame',\n\t\t\tvalue: function _drawFrame() {\n\t\t\t\tthis._ctx.drawImage(this._video, 0, 0, this._width, this._height);\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: 'getOffset',\n\t\t\tvalue: function getOffset(elem) {\n\t\t\t\tif (!elem) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tvar rect = elem.getBoundingClientRect();\n\t\t\t\tvar docElem = void 0;\n\t\t\t\tvar doc = void 0;\n\t\n\t\t\t\tif (rect.width || rect.height || elem.getClientRects().length) {\n\t\t\t\t\tdoc = elem.ownerDocument;\n\t\t\t\t\tdocElem = doc.documentElement;\n\t\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttop: rect.top + window.pageYOffset - docElem.clientTop,\n\t\t\t\t\t\tleft: rect.left + window.pageXOffset - docElem.clientLeft\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn CanvasVideoPlayer;\n\t}();\n\t\n\texports.default = CanvasVideoPlayer;\n\tmodule.exports = exports['default'];\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// canvas-video-player.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 24db9500aca1bfeffbc2","const DEFAULT_OPTIONS = {\n\tframesPerSecond: 25,\n\thideVideo: true,\n\tautoplay: false,\n\taudio: false,\n\ttimelineActions: true,\n\ttimelineSelector: false,\n\ttimelinePasedSelector: false,\n\tresetOnLastFrame: true,\n\tloop: false,\n};\n\nexport default class CanvasVideoPlayer {\n\tconstructor(options = {}) {\n\t\tthis._options = Object.assign({}, DEFAULT_OPTIONS, options);\n\n\t\tthis._video = document.querySelector(this._options.videoSelector);\n\t\tthis._canvas = document.querySelector(this._options.canvasSelector);\n\t\tthis._timeline = document.querySelector(this._options.timelineSelector);\n\t\tthis._timelinePassed = document.querySelector(this._options.timelinePassedSelector);\n\n\t\tif (!this._options.videoSelector || !this._video) {\n\t\t\treturn console.error('No \"videoSelector\" property, or the element is not found');\n\t\t}\n\n\t\tif (!this._options.canvasSelector || !this._canvas) {\n\t\t\treturn console.error('No \"canvasSelector\" property, or the element is not found');\n\t\t}\n\n\t\tif (this._options.timelineSelector && !this._timeline) {\n\t\t\treturn console.error('Element for the \"timelineSelector\" selector not found');\n\t\t}\n\n\t\tif (this._options.timelineSelector && !this._timelinePassed) {\n\t\t\treturn console.error('Element for the \"timelinePassed\" not found');\n\t\t}\n\n\t\tif (this._options.audio) {\n\t\t\tthis._setAudio();\n\t\t}\n\n\t\tthis._ctx = this._canvas.getContext('2d');\n\n\t\tthis._playing = false;\n\n\t\tthis.init();\n\t}\n\n\t_setAudio() {\n\t\tif (typeof this._options.audio === 'string') {\n\t\t\tthis._audio = document.querySelector(this._options.audio);\n\n\t\t\treturn !this._audio && console.error('Element for the \"audio\" not found');\n\t\t}\n\n\t\tthis._audio = document.createElement('audio');\n\t\tthis._audio.innerHTML = this._video.innerHTML;\n\t\tthis._video.parentNode.insertBefore(this._audio, this._video);\n\t\tthis._audio.load();\n\t}\n\n\tinit() {\n\t\tthis._video.load();\n\n\t\tthis._setCanvasSize();\n\t\tthis._bind();\n\t\tthis._updateTimeLine();\n\n\t\tif (this._options.hideVideo) {\n\t\t\tthis._video.style.display = 'none';\n\t\t}\n\n\t\tif (this._options.autoplay) {\n\t\t\tthis.play();\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tthis.pause();\n\n\t\tif (this._options.audio) {\n\t\t\tthis._audio.parentNode.removeChild(this._audio);\n\t\t}\n\n\t\tthis._unbind();\n\t}\n\n\tjumpTo(percentage) {\n\t\tthis._video.currentTime = this._video.duration * percentage;\n\n\t\tif (this._options.audio) {\n\t\t\tthis._audio.currentTime = this._audio.duration * percentage;\n\t\t}\n\t};\n\n\tplay() {\n\t\tthis._lastTime = Date.now();\n\t\tthis._playing = true;\n\t\tthis._loop();\n\n\t\tif (this._options.audio) {\n\t\t\tthis._audio.currentTime = this._video.currentTime;\n\t\t\tthis._audio.play();\n\t\t}\n\t}\n\n\tpause() {\n\t\tthis._playing = false;\n\n\t\tif (this._options.audio) {\n\t\t\tthis._audio.pause();\n\t\t}\n\t}\n\n\tplayPause() {\n\t\tif (this._playing) {\n\t\t\tthis.pause();\n\t\t} else {\n\t\t\tthis.play();\n\t\t}\n\t}\n\n\t_bind() {\n\t\twindow.addEventListener('resize', this._windowResizeHandler);\n\n\t\tthis._canvas.addEventListener('click', this._canvasClickHandler);\n\n\t\tthis._video.addEventListener('timeupdate', this._videoTimeUpdateHandler);\n\t\tthis._video.addEventListener('canplay', this._videoCanPlayHandler);\n\n\t\tif (this._options.timelineActions) {\n\t\t\tthis._timeline.addEventListener('click', this._timeLineClick);\n\t\t}\n\n\t\tif (this._video.readyState >= 2) {\n\t\t\tthis._drawFrame();\n\t\t}\n\t}\n\n\t_unbind() {\n\t\twindow.removeEventListener('resize', this._windowResizeHandler);\n\n\t\tthis.canvas.removeEventListener('click', this._canvasClickHandler);\n\n\t\tthis.video.removeEventListener('timeupdate', this._videoTimeUpdateHandler);\n\t\tthis.video.removeEventListener('canplay', this._videoCanPlayHandler);\n\n\t\tif (this._options.timelineActions) {\n\t\t\tthis._timeline.removeEventListener('click', this._timeLineClick);\n\t\t}\n\t}\n\n\t_setCanvasSize() {\n\t\tthis._width = this._canvas.clientWidth;\n\t\tthis._height = this._canvas.clientHeight;\n\n\t\tthis._canvas.setAttribute('width', this._width);\n\t\tthis._canvas.setAttribute('height', this._height);\n\t}\n\n\t_updateTimeLine() {\n\t\tif (this._options.timelineSelector) {\n\t\t\tconst percentage = -100 + (this._video.currentTime || 0) / this._video.duration * 100;\n\n\t\t\tthis._timelinePassed.style.webkitTransform = `translateX(${percentage}%)`;\n\t\t\tthis._timelinePassed.style.transform = `translateX(${percentage}%)`;\n\t\t}\n\t}\n\n\t_loop() {\n\t\tconst time = Date.now();\n\t\tconst elapsed = (time - this._lastTime) / 1000;\n\t\tconst currentVideoTime = this._video.currentTime;\n\n\t\tif (elapsed >= (1 / this._options.framesPerSecond)) {\n\t\t\tthis._video.currentTime = currentVideoTime + elapsed;\n\t\t\tthis._lastTime = time;\n\n\t\t\tif (this._audio && Math.abs(this._audio.currentTime - currentVideoTime) > 0.2) {\n\t\t\t\tthis._audio.currentTime = currentVideoTime;\n\t\t\t}\n\t\t}\n\n\t\tif (currentVideoTime >= this._video.duration) {\n\t\t\tthis._playing = false;\n\n\t\t\tif (this._options.resetOnLastFrame === true) {\n\t\t\t\tthis._video.currentTime = 0;\n\t\t\t}\n\n\t\t\tif (this._options.loop === true) {\n\t\t\t\tthis._video.currentTime = 0;\n\t\t\t\tthis.play();\n\t\t\t}\n\t\t}\n\n\t\tif (this._playing) {\n\t\t\tthis._animationFrame = requestAnimationFrame(() => this._loop());\n\t\t} else {\n\t\t\tcancelAnimationFrame(this._animationFrame);\n\t\t}\n\t}\n\n\t_drawFrame() {\n\t\tthis._ctx.drawImage(this._video, 0, 0, this._width, this._height);\n\t}\n\n\t_canvasClickHandler = () => {\n\t\tthis.playPause();\n\t};\n\n\t_videoTimeUpdateHandler = () => {\n\t\tthis._drawFrame();\n\t\tthis._updateTimeLine();\n\t};\n\n\t_videoCanPlayHandler = () => {\n\t\tthis._drawFrame();\n\t};\n\n\t_timeLineClick = e => {\n\t\tconst offset = e.clientX - CanvasVideoPlayer.getOffset(this._canvas).left;\n\n\t\tthis.jumpTo(offset / this._timeline.offsetWidth);\n\t};\n\n\t_windowResizeHandler = () => {\n\t\tthis._setCanvasSize();\n\t\tthis._drawFrame();\n\t};\n\n\tstatic getOffset(elem) {\n\t\tif (!elem) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst rect = elem.getBoundingClientRect();\n\t\tlet docElem;\n\t\tlet doc;\n\n\t\tif (rect.width || rect.height || elem.getClientRects().length) {\n\t\t\tdoc = elem.ownerDocument;\n\t\t\tdocElem = doc.documentElement;\n\n\t\t\treturn {\n\t\t\t\ttop: rect.top + window.pageYOffset - docElem.clientTop,\n\t\t\t\tleft: rect.left + window.pageXOffset - docElem.clientLeft,\n\t\t\t};\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./C:/projects/html-canvas-video-player/src/index.js"],"sourceRoot":""}